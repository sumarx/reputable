<%= form_with model: @location, class: "space-y-8" do |f| %>
  <% if @location.errors.any? %>
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
      <ul class="list-disc list-inside text-sm">
        <% @location.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Basic Info -->
  <div>
    <h3 class="text-lg font-semibold text-gray-900 mb-1">Restaurant Details</h3>
    <p class="text-sm text-gray-500 mb-4">Basic information about your location.</p>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Restaurant Name *</label>
        <%= f.text_field :name, placeholder: "e.g. Masosa Cafe", required: true %>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
        <%= f.text_field :phone, placeholder: "e.g. +92 300 1234567" %>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
        <%= f.text_field :address, placeholder: "e.g. 123 Main Street" %>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">City</label>
        <%= f.text_field :city, placeholder: "e.g. Lahore" %>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
        <%= f.text_field :country, placeholder: "e.g. Pakistan" %>
      </div>
    </div>
  </div>

  <!-- Platform Connections -->
  <div class="border-t border-gray-200 pt-6">
    <h3 class="text-lg font-semibold text-gray-900 mb-1">Review Platforms</h3>
    <p class="text-sm text-gray-500 mb-4">Connect your review profiles so we can monitor and respond to reviews. These are optional ‚Äî you can add them later.</p>
    
    <div class="space-y-5">
      <!-- Google -->
      <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-lg">üåê</span>
          <label class="text-sm font-medium text-gray-900">Google Business Profile</label>
        </div>
        <%= f.text_field :google_place_id, placeholder: "e.g. ChIJN1t_tDeuEmsRUsoyG83frY4" %>
        <p class="mt-1.5 text-xs text-gray-400">
          Find yours: search your restaurant on
          <a href="https://developers.google.com/maps/documentation/javascript/place-id" target="_blank" class="text-indigo-600 hover:underline">Google's Place ID guide</a>.
          Or simply search your restaurant on Google Maps ‚Üí the Place ID is in the URL.
        </p>
      </div>

      <!-- Facebook -->
      <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-lg">üìò</span>
          <label class="text-sm font-medium text-gray-900">Facebook Page</label>
        </div>
        <%= f.text_field :facebook_page_id, placeholder: "e.g. masosacafe or 123456789" %>
        <p class="mt-1.5 text-xs text-gray-400">
          Your Facebook Page username or ID. Find it in your Page's URL: facebook.com/<strong>your-page-name</strong>
        </p>
      </div>

      <!-- TripAdvisor -->
      <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-lg">üß≥</span>
          <label class="text-sm font-medium text-gray-900">TripAdvisor</label>
        </div>
        <%= f.text_field :tripadvisor_id, placeholder: "e.g. masosa-cafe-sheikhupura" %>
        <p class="mt-1.5 text-xs text-gray-400">
          Your TripAdvisor listing slug. Find it in your listing URL: tripadvisor.com/Restaurant-<strong>your-listing</strong>
        </p>
      </div>
    </div>
  </div>

  <!-- AI Reply Settings -->
  <div class="border-t border-gray-200 pt-6">
    <h3 class="text-lg font-semibold text-gray-900 mb-1">AI Reply Settings</h3>
    <p class="text-sm text-gray-500 mb-4">Configure how AI generates and handles review replies for this location.</p>

    <div class="space-y-5">
      <!-- Auto-generate toggle -->
      <div class="flex items-center justify-between bg-gray-50 rounded-lg p-4 border border-gray-200">
        <div>
          <label class="text-sm font-medium text-gray-900">Auto-generate AI replies</label>
          <p class="text-xs text-gray-500 mt-0.5">Automatically generate reply drafts when new reviews come in</p>
        </div>
        <div class="relative inline-flex items-center">
          <%= f.check_box :auto_generate_replies, class: "sr-only peer", id: "auto_generate_replies" %>
          <label for="auto_generate_replies" class="w-11 h-6 bg-gray-300 peer-checked:bg-indigo-600 rounded-full cursor-pointer transition-colors relative after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-transform peer-checked:after:translate-x-5"></label>
        </div>
      </div>

      <!-- Default tone -->
      <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
        <label class="text-sm font-medium text-gray-900 block mb-2">Default Reply Tone</label>
        <%= f.select :default_reply_tone,
              [["Professional", "professional"], ["Friendly", "friendly"], ["Apologetic", "apologetic"]],
              {},
              class: "w-full sm:w-64 rounded-lg border-gray-300 text-sm" %>
        <p class="text-xs text-gray-500 mt-1.5">The tone AI will use when generating reply drafts</p>
      </div>

      <!-- Auto-post (coming soon) -->
      <div class="flex items-center justify-between bg-gray-50 rounded-lg p-4 border border-gray-200 opacity-60">
        <div>
          <label class="text-sm font-medium text-gray-900">Auto-post approved replies</label>
          <p class="text-xs text-gray-500 mt-0.5">Automatically post replies to Google Business Profile</p>
          <span class="inline-flex items-center mt-1 px-2 py-0.5 rounded text-xs font-medium" style="background-color: #fef3c7; color: #92400e;">Coming Soon</span>
        </div>
        <div class="relative inline-flex items-center">
          <input type="checkbox" disabled class="sr-only peer" />
          <label class="w-11 h-6 bg-gray-300 rounded-full cursor-not-allowed relative after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-5 after:w-5"></label>
        </div>
      </div>
    </div>
  </div>

  <div class="flex gap-3 pt-2">
    <%= f.submit class: "inline-flex items-center px-5 py-2.5 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 cursor-pointer transition" %>
    <%= link_to "Cancel", locations_path, class: "inline-flex items-center px-5 py-2.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition" %>
  </div>
<% end %>
