<%# Charts Section — 2-col grid %>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-5">
  <%# Rating Trend %>
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm">
    <div class="px-4 py-3 border-b border-gray-100">
      <h3 class="text-sm font-semibold text-gray-900">Rating Trend</h3>
      <p class="text-xs text-gray-400">Average rating over time</p>
    </div>
    <div class="p-4">
      <%= line_chart @stats_service.rating_trend_data, height: "240px", colors: ["#4F46E5"],
          library: { scales: { y: { min: 1, max: 5 } }, plugins: { legend: { display: false } } } %>
    </div>
  </div>

  <%# Review Volume %>
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm">
    <div class="px-4 py-3 border-b border-gray-100">
      <h3 class="text-sm font-semibold text-gray-900">Review Volume</h3>
      <p class="text-xs text-gray-400">Number of reviews received</p>
    </div>
    <div class="p-4">
      <%= column_chart @stats_service.review_volume_data, height: "240px", colors: ["#A855F7"],
          library: { plugins: { legend: { display: false } } } %>
    </div>
  </div>

  <%# Sentiment Trend %>
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm">
    <div class="px-4 py-3 border-b border-gray-100">
      <h3 class="text-sm font-semibold text-gray-900">Sentiment Trend</h3>
      <p class="text-xs text-gray-400">Positive, neutral &amp; negative over time</p>
    </div>
    <div class="p-4">
      <%= area_chart @stats_service.sentiment_trend_data, height: "240px",
          colors: ["#10B981", "#F59E0B", "#F43F5E"], stacked: true,
          library: { plugins: { legend: { position: "bottom", labels: { boxWidth: 12, padding: 16, font: { size: 11 } } } } } %>
    </div>
  </div>

  <%# Rating Distribution %>
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm">
    <div class="px-4 py-3 border-b border-gray-100">
      <h3 class="text-sm font-semibold text-gray-900">Rating Distribution</h3>
      <p class="text-xs text-gray-400">Breakdown by star rating</p>
    </div>
    <div class="p-4 space-y-2.5">
      <% @stats_service.rating_distribution.each do |row| %>
        <div class="flex items-center gap-3">
          <span class="text-xs font-medium text-gray-600 w-8 text-right"><%= row[:star] %> ★</span>
          <div class="flex-1 bg-gray-100 rounded-full h-5 overflow-hidden">
            <% bar_color = row[:star] >= 4 ? '#6366F1' : row[:star] == 3 ? '#FBBF24' : '#FB7185' %>
            <div class="h-full rounded-full transition-all duration-500"
                 style="width: <%= [row[:percentage], 2].max %>%; background-color: <%= bar_color %>;">
            </div>
          </div>
          <span class="text-xs text-gray-500 w-16 text-right"><%= row[:count] %> (<%= row[:percentage] %>%)</span>
        </div>
      <% end %>
    </div>
  </div>

  <%# Platform Distribution %>
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm">
    <div class="px-4 py-3 border-b border-gray-100">
      <h3 class="text-sm font-semibold text-gray-900">Reviews by Platform</h3>
      <p class="text-xs text-gray-400">Where your reviews come from</p>
    </div>
    <div class="p-4">
      <%= pie_chart @stats_service.platform_distribution, height: "240px",
          colors: ["#4F46E5", "#3B82F6", "#10B981", "#F43F5E"],
          library: { plugins: { legend: { position: "bottom", labels: { boxWidth: 12, padding: 16, font: { size: 11 } } } } } %>
    </div>
  </div>

  <%# Sentiment by Platform %>
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm">
    <div class="px-4 py-3 border-b border-gray-100">
      <h3 class="text-sm font-semibold text-gray-900">Sentiment by Platform</h3>
      <p class="text-xs text-gray-400">How each platform's reviews compare</p>
    </div>
    <div class="p-4">
      <%= column_chart @stats_service.sentiment_by_platform, height: "240px",
          colors: ["#10B981", "#F59E0B", "#F43F5E"], stacked: true,
          library: { plugins: { legend: { position: "bottom", labels: { boxWidth: 12, padding: 16, font: { size: 11 } } } } } %>
    </div>
  </div>
</div>
